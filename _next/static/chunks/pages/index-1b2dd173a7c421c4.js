(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7528)}])},7528:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return X}});var t=n(5893),i=n(7294),a=n(6701),l=n(8130),c=n(5675),o=n.n(c),r=n(4959),d=n.n(r);let h=[{imgUrl:"/cake_modal.png",title:"做个蛋糕!",description:"嗯...既然是你的生日, 干脆来试一下自己做一个蛋糕？开始要制作面团，然后放入烤箱烘焙，最后涂上喜欢的奶油等等。大概就是这样，准备好了吗？",btnUrl:"准备好了，开始吧"},{imgUrl:"/mix_modal.png",title:"融合均匀!",description:"真不错，一点颗粒都看不到! 先去把烤箱预热下。\n下一步，把做好的面糊放入烤箱。",btnUrl:"预热好了，放进来"},{imgUrl:"/oven_modal.png",title:"烤焙完成!",description:"叮！时间到了，拿出来看一下吧。看到表面隆起一定高度又往下塌，说明就已经熟透了。晾一会儿，热气排空，接下来就可以往上涂奶油层了。",btnUrl:"拿出你的奶油枪"}],m=[{color:"#ffd296",name:"香草",type:"base"},{color:"#f74352c7",name:"糖果",type:"base"},{color:"#d5ccb2",name:"开心果",type:"base"}],x=[{color:"#ffffff",name:"奶油",type:"filling"},{color:"#e1dcff",name:"芋泥流心",type:"filling"},{color:"#9f3d28",name:"提拉米苏",type:"filling"},{color:"#ff99a3",name:"玫瑰千层",type:"filling"},{color:"#f7cb76",name:"芒果",type:"filling"}];var u=n(6821),f=n.n(u),g=n(1752),j=n.n(g);let{publicRuntimeConfig:p}=j()(),_=p.assetPrefix;function v(e){let{imgUrl:s,title:n,content:i,btnText:a,onConfirm:l}=e;return(0,t.jsxs)("div",{className:f()["ls-modal"],children:[(0,t.jsx)("div",{className:"ls-modal__image",children:(0,t.jsx)(o(),{width:100,height:102,src:"".concat(_,"/").concat(s),alt:n})}),(0,t.jsxs)("div",{className:"ls-modal__content",children:[(0,t.jsx)("h1",{children:n}),(0,t.jsx)("p",{children:i}),(0,t.jsx)("button",{onClick:l,children:a})]})]})}var N=n(6043),b=n.n(N);function y(e){let{children:s,className:n,style:i,onClick:a}=e;return(0,t.jsx)("button",{className:"".concat(b()["ls-button"]," ").concat(n),style:i,onClick:a,children:s})}let{publicRuntimeConfig:w}=j()(),k=w.assetPrefix;function C(e){let{onStart:s}=e;return(0,t.jsxs)("div",{className:"birthday__stage stage1",children:[(0,t.jsx)(o(),{width:300,height:370,src:"".concat(k,"/cake.png"),alt:"Birth Cake"}),(0,t.jsx)(y,{className:"start",onClick:s,children:"璇璇姐，生日快乐！"})]})}let{publicRuntimeConfig:B}=j()(),S=B.assetPrefix;function E(e){let{onMixWell:s}=e,[n,a]=(0,i.useState)(0),l=(0,i.useRef)(!1),c=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{console.log("count",n),5===n&&setTimeout(()=>{c.current||s(),c.current=!0},200)},[n,s]),(0,t.jsxs)("div",{className:"birthday__stage stage2",children:[(0,t.jsx)("h1",{children:"打发搅拌"}),(0,t.jsx)("p",{children:"蛋黄、面粉、牛奶、色拉油、糖等等，都事先准备好，一起放到容器里了。搅拌工作交给你，看到下面那个按钮了吗？一直点点点，就可以打散均匀了。"}),(0,t.jsxs)("div",{className:"mix",children:[(0,t.jsx)("div",{className:"mix__bowl",children:(0,t.jsx)(o(),{width:207,height:148,src:"".concat(S,"/bowl.png"),alt:"Mix Bowl"})}),(0,t.jsx)("div",{className:"mix__spoon",children:(0,t.jsx)(o(),{width:25,height:81,className:l.current?"mixing":"",src:"".concat(S,"/spoon.png"),alt:"Mix Spoon"})})]}),(0,t.jsx)(y,{className:"start",onClick:()=>{!l.current&&n<5&&(a(n+1),l.current=!0,setTimeout(()=>{l.current=!1},500))},children:"用力点这儿！"})]})}var O=n(3310);let{publicRuntimeConfig:M}=j()(),P=M.assetPrefix;function R(e){let{onBaseBake:s}=e,[n,a]=(0,i.useState)(!1),{isOver:l,setNodeRef:c}=(0,O.Zj)({id:"droppable"}),{attributes:r,listeners:d,setNodeRef:h,transform:m}=(0,O.O1)({id:"draggable"}),x=m?{transform:"translate3d(".concat(m.x,"px, ").concat(m.y,"px, 0)")}:void 0;return(0,i.useEffect)(()=>{l&&s()},[l]),(0,t.jsxs)("div",{className:"birthday__stage stage3",children:[(0,t.jsx)("h1",{children:"烘烤蛋糕胚"}),(0,t.jsx)("p",{children:"现在要把之前打好的面糊放到烤箱里. 找到下面那个模具了吗，长按把它拖到上面。"}),(0,t.jsxs)("div",{className:l?"oven hover":"oven",children:[(0,t.jsx)(o(),{width:290,height:282,draggable:!1,src:"".concat(P,"/oven.png"),alt:"Oven"}),(0,t.jsx)("div",{className:"over-real",ref:c})]}),(0,t.jsx)("div",{className:"tin",ref:h,style:x,...d,...r,children:(0,t.jsx)(o(),{width:90,height:70,draggable:!1,...x,src:"".concat(P,"/tin.png"),alt:"Tin"})})]})}let{publicRuntimeConfig:U}=j()(),T=U.assetPrefix;function Z(){let[e,s]=(0,i.useState)([]),[n,l]=(0,i.useState)([]),[c,o]=(0,i.useState)(!1);return(0,t.jsxs)("div",{className:"birthday__stage stage4",children:[(0,t.jsx)(a.Z,{in:!c,timeout:1e3,classNames:"fade",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"装饰点缀"}),(0,t.jsx)("p",{children:"按你喜欢的任何顺序涂上点缀，点击任意一种原料，就会层层叠加到蛋糕上。确保把你想吃的都加上了后，点一下底部的按钮，蜡烛就会出现，你的蛋糕就做好啦！"}),(0,t.jsx)(F,{bases:e,fillings:n,maxBaseCount:4,maxFillingCount:5,onBaseAdd:n=>{s([...e,n])},onFillingAdd:e=>{l([...n,e])}})]})}),(0,t.jsx)(z,{bases:e,fillings:n,finished:c}),!c&&(0,t.jsx)(y,{onClick:()=>{o(!0)},children:"点上蜡烛!"}),(0,t.jsxs)("div",{className:c?"hoping finished":"hoping",children:["璇璇姐，生日快乐",(0,t.jsx)("br",{})]}),c&&(0,t.jsx)("div",{className:"firework",children:(0,t.jsxs)("div",{className:"pyro",children:[(0,t.jsx)("div",{className:"before"}),(0,t.jsx)("div",{className:"after"})]})})]})}function F(e){let{bases:s,fillings:n,maxBaseCount:a,maxFillingCount:l,onBaseAdd:c,onFillingAdd:o}=e,[r,d]=(0,i.useState)("filling");return(0,t.jsxs)("div",{className:"season-paste",children:[(0,t.jsxs)("div",{className:"base"===r&&s.length<a?"paste":"paste inactive",children:[(0,t.jsxs)("div",{className:"intros",children:[(0,t.jsx)("h3",{children:"装饰"}),(0,t.jsxs)("h5",{children:[s.length," / ",a]})]}),(0,t.jsx)("div",{className:"options",children:m.map(e=>(0,t.jsxs)("div",{className:"option",onClick:()=>{c(e),d("filling")},children:[(0,t.jsx)("div",{className:"option__color",style:{backgroundColor:e.color}}),(0,t.jsx)("div",{className:"option__name",children:e.name})]},e.name))})]}),(0,t.jsxs)("div",{className:"filling"===r&&n.length<l?"paste":"paste inactive",children:[(0,t.jsxs)("div",{className:"intros",children:[(0,t.jsx)("h3",{children:"涂层/奶油"}),(0,t.jsxs)("h5",{children:[n.length," / ",l]})]}),(0,t.jsx)("div",{className:"options",children:x.map(e=>(0,t.jsxs)("div",{className:"option",onClick:()=>{o(e),d("base")},children:[(0,t.jsx)("div",{className:"option__color",style:{backgroundColor:e.color}}),(0,t.jsx)("div",{className:"option__name",children:e.name})]},e.name))})]})]})}function z(e){let{bases:s,fillings:n,finished:a}=e,[l,c]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=[],t=Math.max(s.length,n.length);for(let i=0;i<t;i++)i<n.length&&e.unshift(n[i]),i<s.length&&e.unshift(s[i]);c(e)},[s,n]),(0,t.jsxs)("div",{className:a?"cake finished":"cake",children:[(0,t.jsxs)("div",{className:a?"candle finished":"candle",children:[(0,t.jsx)(o(),{width:10,height:44,src:"".concat(T,"/candle.png"),alt:"Candle"}),(0,t.jsx)("div",{className:"frame"})]}),l.map((e,s)=>(0,t.jsx)("div",{className:e.type,style:{backgroundColor:e.color,width:200*(17-l.length+s)/17+"px"},children:"filling"===e.type?["","","","","","","",""].map((s,n)=>(0,t.jsx)("div",{style:{backgroundColor:e.color}},n)):["","","","",""].map((s,n)=>(0,t.jsx)("div",{style:{backgroundColor:e.color}},n))},e.name+s)),(0,t.jsx)("div",{className:"base",style:{backgroundColor:"#ffd296",width:"200px"}})]})}var A=n(7484),I=n.n(A);let{publicRuntimeConfig:L}=j()(),W=L.assetPrefix;function X(){let[e,s]=(0,i.useState)(1),[n,c]=(0,i.useState)(!1),[r,m]=(0,i.useState)(h[0]),x=(0,i.useRef)(null),u=()=>{x.current&&x.current.play()},[f,g]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let e=I()(),s=I()("2025-04-10 00:00"),n=Math.floor(s.diff(e)/1e3);g(n);let t=setInterval(()=>{g(e=>e-1)},1e3);return()=>{clearInterval(t)}},[]),(0,t.jsxs)("main",{className:d().birthday,children:[(0,t.jsx)("div",{className:f>0?"countdown":"countdown hidden",children:(0,t.jsx)(l.ZP,{date:Date.now()+1e3*f})}),(0,t.jsx)(a.Z,{in:n,timeout:2e3,classNames:"scale",unmountOnExit:!0,children:(0,t.jsx)(v,{imgUrl:r.imgUrl,title:r.title,content:r.description,btnText:r.btnUrl,onConfirm:()=>{s(e=>e+1),c(!1)}})}),(0,t.jsxs)("div",{className:f>0?"hidden":"",children:[(0,t.jsx)("audio",{autoPlay:!0,loop:!0,ref:x,children:(0,t.jsx)("source",{src:"".concat(W,"/bgm1.mp3"),type:"audio/mpeg"})}),(0,t.jsx)(o(),{width:207,height:148,src:"".concat(W,"/bowl.png"),alt:"Mix Bowl",className:"hidden"}),(0,t.jsx)(o(),{width:25,height:81,className:"hidden",src:"".concat(W,"/spoon.png"),alt:"Mix Spoon"}),(0,t.jsx)(o(),{width:290,height:282,draggable:!1,src:"".concat(W,"/oven.png"),alt:"Oven",className:"hidden"}),(0,t.jsx)(o(),{width:90,height:70,draggable:!1,src:"".concat(W,"/tin.png"),alt:"Tin",className:"hidden"}),(0,t.jsx)(o(),{width:10,height:44,src:"".concat(W,"/candle.png"),alt:"Candle",className:"hidden"}),(0,t.jsx)(a.Z,{in:!n&&1===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,t.jsx)(C,{onStart:()=>{console.log("onstart"),c(!0),u(),m(h[0])}})}),(0,t.jsx)(a.Z,{in:!n&&2===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,t.jsx)(E,{onMixWell:()=>{console.log("onMixWell"),c(!0),m(h[1])}})}),(0,t.jsx)(a.Z,{in:!n&&3===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,t.jsx)(R,{onBaseBake:()=>{console.log("onBaseBake"),c(!0),m(h[2])}})}),(0,t.jsx)(a.Z,{in:!n&&4===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,t.jsx)(Z,{})})]})]})}},6043:function(e){e.exports={"ls-button":"LSButton_ls-button__i1VBh"}},6821:function(e){e.exports={"ls-modal":"LSModal_ls-modal__7nS3c"}},4959:function(e){e.exports={birthday:"Birthday_birthday__CbFUT",bounce:"Birthday_bounce__xbTyn",moveup:"Birthday_moveup__ONt9g",in:"Birthday_in__BFhqz",mix:"Birthday_mix__R_28z",flicker:"Birthday_flicker__MB7tn"}}},function(e){e.O(0,[697,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);