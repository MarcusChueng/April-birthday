(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7528)}])},7528:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return X}});var i=n(5893),t=n(7294),l=n(6701),a=n(8130),c=n(5675),o=n.n(c),r=n(4959),d=n.n(r);let h=[{imgUrl:"/cake_modal.png",title:"做个蛋糕!",description:"嗯...既然是你的生日, 干脆来试一下自己做一个蛋糕？开始要制作面团，然后放入烤箱烘焙，最后涂上喜欢的奶油等等。大概就是这样，准备好了吗？",btnUrl:"准备好了，开始吧"},{imgUrl:"/mix_modal.png",title:"融合均匀!",description:"真不错，一点颗粒都看不到! 先去把烤箱预热下。\n下一步，把做好的面糊放入烤箱。",btnUrl:"预热好了，放进来"},{imgUrl:"/oven_modal.png",title:"烤焙完成!",description:"叮！时间到了，拿出来看一下吧。看到表面隆起一定高度又往下塌，说明就已经熟透了。晾一会儿，热气排空，接下来就可以往上涂奶油层了。",btnUrl:"拿出你的奶油枪"}],m=[{color:"#ffd296",name:"香草",type:"base"},{color:"#f74352c7",name:"糖果",type:"base"},{color:"#d5ccb2",name:"开心果",type:"base"}],x=[{color:"#ffffff",name:"奶油",type:"filling"},{color:"#e1dcff",name:"芋泥流心",type:"filling"},{color:"#9f3d28",name:"提拉米苏",type:"filling"},{color:"#ff99a3",name:"玫瑰千层",type:"filling"},{color:"#f7cb76",name:"芒果",type:"filling"}];var u=n(6821),g=n.n(u),f=n(1752),j=n.n(f);let{publicRuntimeConfig:p}=j()(),_=p.assetPrefix;function v(e){let{imgUrl:s,title:n,content:t,btnText:l,onConfirm:a}=e;return(0,i.jsxs)("div",{className:g()["ls-modal"],children:[(0,i.jsx)("div",{className:"ls-modal__image",children:(0,i.jsx)(o(),{width:100,height:102,src:"".concat(_,"/").concat(s),alt:n})}),(0,i.jsxs)("div",{className:"ls-modal__content",children:[(0,i.jsx)("h1",{children:n}),(0,i.jsx)("p",{children:t}),(0,i.jsx)("button",{onClick:a,children:l})]})]})}var N=n(6043),b=n.n(N);function y(e){let{children:s,className:n,style:t,onClick:l}=e;return(0,i.jsx)("button",{className:"".concat(b()["ls-button"]," ").concat(n),style:t,onClick:l,children:s})}let{publicRuntimeConfig:w}=j()(),k=w.assetPrefix;function C(e){let{onStart:s}=e;return(0,i.jsxs)("div",{className:"birthday__stage stage1",children:[(0,i.jsx)(o(),{width:300,height:370,src:"".concat(k,"/cake.png"),alt:"Birth Cake"}),(0,i.jsx)(y,{className:"start",onClick:s,children:"生日快乐！"})]})}let{publicRuntimeConfig:B}=j()(),S=B.assetPrefix;function E(e){let{onMixWell:s}=e,[n,l]=(0,t.useState)(0),[a,c]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{console.log("count",n),5===n&&setTimeout(()=>{s()},500)},[n,s]),(0,i.jsxs)("div",{className:"birthday__stage stage2",children:[(0,i.jsx)("h1",{children:"打发搅拌"}),(0,i.jsx)("p",{children:"蛋黄、面粉、牛奶、色拉油、糖等等，都事先准备好，一起放到容器里了。搅拌工作交给你，看到下面那个按钮了吗？一直点点点，就可以打散均匀了。"}),(0,i.jsxs)("div",{className:"mix",children:[(0,i.jsx)("div",{className:"mix__bowl",children:(0,i.jsx)(o(),{width:207,height:148,src:"".concat(S,"/bowl.png"),alt:"Mix Bowl"})}),(0,i.jsx)("div",{className:"mix__spoon",children:(0,i.jsx)(o(),{width:25,height:81,className:a?"mixing":"",src:"".concat(S,"/spoon.png"),alt:"Mix Spoon"})})]}),(0,i.jsx)(y,{className:"start",onClick:()=>{!a&&n<5&&(l(n+1),c(!0),setTimeout(()=>{c(!1)},500))},children:"用力点这儿！"})]})}var O=n(9294),M=n(9272);let{publicRuntimeConfig:P}=j()(),U=P.assetPrefix;function T(e){let{onBaseBake:s}=e,[n,l]=(0,t.useState)(!1),[{isDragging:a},c,r]=(0,O.c)(()=>({type:"tin",collect:e=>({isDragging:!!e.isDragging()})})),[{isOver:d},h]=(0,M.L)(()=>({accept:"tin",drop:()=>s(),collect:e=>({isOver:!!e.isOver()})}));return(0,i.jsxs)("div",{className:"birthday__stage stage3",children:[(0,i.jsx)("h1",{children:"烘烤蛋糕胚"}),(0,i.jsx)("p",{children:"现在要把之前打好的面糊放到烤箱里. 找到下面那个模具了吗，长按把它拖到上面。"}),(0,i.jsxs)("div",{className:d?"oven hover":"oven",children:[(0,i.jsx)(o(),{width:290,height:282,draggable:!1,src:"".concat(U,"/oven.png"),alt:"Oven"}),(0,i.jsx)("div",{className:"over-real",ref:h})]}),(0,i.jsx)("div",{className:"tin",ref:c,children:(0,i.jsx)(o(),{width:90,height:70,draggable:!1,src:"".concat(U,"/tin.png"),alt:"Tin"})})]})}let{publicRuntimeConfig:R}=j()(),Z=R.assetPrefix;function F(){let[e,s]=(0,t.useState)([]),[n,a]=(0,t.useState)([]),[c,o]=(0,t.useState)(!1);return(0,i.jsxs)("div",{className:"birthday__stage stage4",children:[(0,i.jsx)(l.Z,{in:!c,timeout:1e3,classNames:"fade",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"装饰点缀"}),(0,i.jsx)("p",{children:"按你喜欢的任何顺序涂上点缀，点击任意一种原料，就会层层叠加到蛋糕上。确保把你想吃的都加上了后，点一下底部的按钮，蜡烛就会出现，你的蛋糕就做好啦！"}),(0,i.jsx)(D,{bases:e,fillings:n,maxBaseCount:4,maxFillingCount:5,onBaseAdd:n=>{s([...e,n])},onFillingAdd:e=>{a([...n,e])}})]})}),(0,i.jsx)(L,{bases:e,fillings:n,finished:c}),!c&&(0,i.jsx)(y,{onClick:()=>{o(!0)},children:"点上蜡烛!"}),(0,i.jsxs)("div",{className:c?"hoping finished":"hoping",children:["生日快乐",(0,i.jsx)("br",{})]}),c&&(0,i.jsx)("div",{className:"firework",children:(0,i.jsxs)("div",{className:"pyro",children:[(0,i.jsx)("div",{className:"before"}),(0,i.jsx)("div",{className:"after"})]})})]})}function D(e){let{bases:s,fillings:n,maxBaseCount:l,maxFillingCount:a,onBaseAdd:c,onFillingAdd:o}=e,[r,d]=(0,t.useState)("filling");return(0,i.jsxs)("div",{className:"season-paste",children:[(0,i.jsxs)("div",{className:"base"===r&&s.length<l?"paste":"paste inactive",children:[(0,i.jsxs)("div",{className:"intros",children:[(0,i.jsx)("h3",{children:"装饰"}),(0,i.jsxs)("h5",{children:[s.length," / ",l]})]}),(0,i.jsx)("div",{className:"options",children:m.map(e=>(0,i.jsxs)("div",{className:"option",onClick:()=>{c(e),d("filling")},children:[(0,i.jsx)("div",{className:"option__color",style:{backgroundColor:e.color}}),(0,i.jsx)("div",{className:"option__name",children:e.name})]},e.name))})]}),(0,i.jsxs)("div",{className:"filling"===r&&n.length<a?"paste":"paste inactive",children:[(0,i.jsxs)("div",{className:"intros",children:[(0,i.jsx)("h3",{children:"涂层/奶油"}),(0,i.jsxs)("h5",{children:[n.length," / ",a]})]}),(0,i.jsx)("div",{className:"options",children:x.map(e=>(0,i.jsxs)("div",{className:"option",onClick:()=>{o(e),d("base")},children:[(0,i.jsx)("div",{className:"option__color",style:{backgroundColor:e.color}}),(0,i.jsx)("div",{className:"option__name",children:e.name})]},e.name))})]})]})}function L(e){let{bases:s,fillings:n,finished:l}=e,[a,c]=(0,t.useState)([]);return(0,t.useEffect)(()=>{let e=[],i=Math.max(s.length,n.length);for(let t=0;t<i;t++)t<n.length&&e.unshift(n[t]),t<s.length&&e.unshift(s[t]);c(e)},[s,n]),(0,i.jsxs)("div",{className:l?"cake finished":"cake",children:[(0,i.jsxs)("div",{className:l?"candle finished":"candle",children:[(0,i.jsx)(o(),{width:10,height:44,src:"".concat(Z,"/candle.png"),alt:"Candle"}),(0,i.jsx)("div",{className:"frame"})]}),a.map((e,s)=>(0,i.jsx)("div",{className:e.type,style:{backgroundColor:e.color,width:200*(17-a.length+s)/17+"px"},children:"filling"===e.type?["","","","","","","",""].map((s,n)=>(0,i.jsx)("div",{style:{backgroundColor:e.color}},n)):["","","","",""].map((s,n)=>(0,i.jsx)("div",{style:{backgroundColor:e.color}},n))},e.name+s)),(0,i.jsx)("div",{className:"base",style:{backgroundColor:"#ffd296",width:"200px"}})]})}var z=n(7484),A=n.n(z);let{publicRuntimeConfig:I}=j()(),W=I.assetPrefix;function X(){let[e,s]=(0,t.useState)(1),[n,c]=(0,t.useState)(!1),[r,m]=(0,t.useState)(h[0]),x=(0,t.useRef)(null),u=()=>{x.current&&x.current.play()},[g,f]=(0,t.useState)(0);return(0,t.useEffect)(()=>{let e=A()(),s=A()("2025-04-05 00:00"),n=Math.floor(s.diff(e)/1e3);f(n);let i=setInterval(()=>{f(e=>e-1)},1e3);return()=>{clearInterval(i)}},[]),(0,i.jsxs)("main",{className:d().birthday,children:[(0,i.jsx)("div",{className:g>0?"countdown":"countdown hidden",children:(0,i.jsx)(a.ZP,{date:Date.now()+1e3*g})}),(0,i.jsx)(l.Z,{in:n,timeout:2e3,classNames:"scale",unmountOnExit:!0,children:(0,i.jsx)(v,{imgUrl:r.imgUrl,title:r.title,content:r.description,btnText:r.btnUrl,onConfirm:()=>{s(e=>e+1),c(!1)}})}),(0,i.jsxs)("div",{className:g>0?"hidden":"",children:[(0,i.jsx)("audio",{autoPlay:!0,loop:!0,ref:x,children:(0,i.jsx)("source",{src:"".concat(W,"/bgm1.mp3"),type:"audio/mpeg"})}),(0,i.jsx)(o(),{width:207,height:148,src:"".concat(W,"/bowl.png"),alt:"Mix Bowl",className:"hidden"}),(0,i.jsx)(o(),{width:25,height:81,className:"hidden",src:"".concat(W,"/spoon.png"),alt:"Mix Spoon"}),(0,i.jsx)(o(),{width:290,height:282,draggable:!1,src:"".concat(W,"/oven.png"),alt:"Oven",className:"hidden"}),(0,i.jsx)(o(),{width:90,height:70,draggable:!1,src:"".concat(W,"/tin.png"),alt:"Tin",className:"hidden"}),(0,i.jsx)(o(),{width:10,height:44,src:"".concat(W,"/candle.png"),alt:"Candle",className:"hidden"}),(0,i.jsx)(l.Z,{in:!n&&1===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(C,{onStart:()=>{console.log("onstart"),c(!0),u(),m(h[0])}})}),(0,i.jsx)(l.Z,{in:!n&&2===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(E,{onMixWell:()=>{console.log("onMixWell"),c(!0),m(h[1])}})}),(0,i.jsx)(l.Z,{in:!n&&3===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(T,{onBaseBake:()=>{console.log("onBaseBake"),c(!0),m(h[2])}})}),(0,i.jsx)(l.Z,{in:!n&&4===e,timeout:2e3,classNames:"fade",unmountOnExit:!0,children:(0,i.jsx)(F,{})})]})]})}},6043:function(e){e.exports={"ls-button":"LSButton_ls-button__i1VBh"}},6821:function(e){e.exports={"ls-modal":"LSModal_ls-modal__7nS3c"}},4959:function(e){e.exports={birthday:"Birthday_birthday__CbFUT",bounce:"Birthday_bounce__xbTyn",moveup:"Birthday_moveup__ONt9g",in:"Birthday_in__BFhqz",mix:"Birthday_mix__R_28z",flicker:"Birthday_flicker__MB7tn"}}},function(e){e.O(0,[297,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);